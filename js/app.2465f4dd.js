(function(e){function t(t){for(var c,s,i=t[0],u=t[1],o=t[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(c in u)Object.prototype.hasOwnProperty.call(u,c)&&(e[c]=u[c]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,o||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(c=!1)}c&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var c={},a={app:0},r=[];function s(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=c,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(n,c,function(t){return e[t]}.bind(null,c));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/otakoyi-test/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var d=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"069b":function(e,t,n){},"2e3c":function(e,t,n){"use strict";var c=n("8298"),a=n.n(c);a.a},"3ea6":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view")],1)},r=[],s={name:"App"},i=s,u=(n("5c0b"),n("2877")),o=n("6544"),d=n.n(o),l=n("7496"),p=Object(u["a"])(i,a,r,!1,null,null,null),f=p.exports;d()(p,{VApp:l["a"]});var m=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("VendingMachine")],1)},v=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"machine"},[n("h1",{staticClass:"machine__title"},[e._v(" The Vending Machine ")]),n("div",{staticClass:"machine__content"},[n("div",{staticClass:"machine__products"},e._l(e.products.slice(0,6),(function(e){return n("div",{key:e.id,staticClass:"machine__product"},[n("Product",{attrs:{product:e,disabled:!1}})],1)})),0),n("div",{staticClass:"machine__cash"},[n("Cash")],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.receivedProducts).length,expression:"Object.keys(receivedProducts).length"}],staticClass:"machine__received"},[n("h2",{staticClass:"machine__received-title"},[e._v(" Received products: ")]),n("div",{staticClass:"machine__products"},e._l(e.receivedProducts,(function(e){return n("div",{key:e.id,staticClass:"machine__product"},[n("Product",{attrs:{product:e,disabled:!0}})],1)})),0)])])},_=[],y=n("5530"),g=n("2f62"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"product",class:{"product--selected":e.product.isSelected&&!e.disabled,"product--disabled":e.disabled},on:{click:function(t){!e.disabled&&e.selectProduct(t,e.product.id)}}},[n("v-card",{staticClass:"product__card",attrs:{height:"250"}},[n("v-img",{staticClass:"product__image",attrs:{src:e.product.image}}),n("v-card-title",{staticClass:"product__title"},[e._v(" "+e._s(e.product.name)+" ")]),n("v-card-text",{staticClass:"product__description"},[n("div",{staticClass:"product__price"},[n("div",{staticClass:"product__price-value"},[e._v(" "+e._s(e.product.price)+" ")]),n("div",{staticClass:"product__price-label"},[e._v(" "+e._s(e.product.currency)+" ")])])])],1)],1)},P=[],j={props:{product:{type:Object,required:!0},disabled:{type:Boolean}},methods:Object(y["a"])(Object(y["a"])({},Object(g["b"])({_selectProduct:"selectProduct"})),{},{selectProduct:function(e,t){this._selectProduct({productId:t})}})},O=j,S=(n("7cd1"),n("b0af")),k=n("99d9"),w=n("adda"),I=Object(u["a"])(O,C,P,!1,null,null,null),x=I.exports;d()(I,{VCard:S["a"],VCardText:k["b"],VCardTitle:k["c"],VImg:w["a"]});var V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cash"},[n("div",{staticClass:"cash__message",class:e.state.isWarning&&"cash__message--warning"},[e._v(" "+e._s(e.state.message)+" ")]),Object.keys(e.currency).length?n("v-card",{staticClass:"cash__banknotes"},[n("v-subheader",[e._v(" Accepted banknotes: ")]),n("div",{staticClass:"cash__currency"},[n("v-select",{attrs:{items:e.currencyNames,color:"success",dark:"",dense:"",solo:""},model:{value:e.selectCurrency,callback:function(t){e.selectCurrency=t},expression:"selectCurrency"}})],1),n("ul",{staticClass:"cash__banknotes-list"},e._l(e.selectedCurrency.banknotes,(function(t){return n("li",{key:t,staticClass:"cash__banknotes-item"},[n("div",{staticClass:"cash__banknotes-value"},[e._v(" "+e._s(t)+" ")]),n("div",{staticClass:"cash__banknotes-label"},[e._v(" "+e._s(e.selectedCurrency.name)+" ")])])})),0)],1):e._e(),n("v-card",{staticClass:"cash__balance"},[n("v-card-title",{staticClass:"cash__balance-label"},[e._v(" Current balance: ")]),n("v-card-actions",{staticClass:"cash__balance-value"},[e._v(" "+e._s(e.balance)+" ")])],1),n("v-card",{staticClass:"cash__insert"},[n("div",{staticClass:"cash__insert-state",class:e.insertingState.isWarning&&"cash__insert-state--warning"},[e._v(" "+e._s(e.insertingState.message)+" ")]),n("div",{staticClass:"cash__insert-form"},[n("v-text-field",{attrs:{label:"Amount of money"},on:{keypress:e.numbersValidate},model:{value:e.balanceField,callback:function(t){e.balanceField=t},expression:"balanceField"}}),n("v-btn",{staticClass:"cash__submit",attrs:{color:"success",disabled:!e.isInserted},on:{click:e.insertMoney}},[e._v(" Insert ")])],1)]),n("v-btn",{staticClass:"cash__submit",attrs:{color:"success",disabled:!e.isSelectedProduct},on:{click:e.buyItem}},[e._v(" Buy an item ")])],1)},M=[],A=(n("7db0"),n("d81d"),n("45fc"),n("b0c0"),n("07ac"),n("2ef0")),W=n.n(A),F={default:"",process:"Processing...",wrongBanknote:"Wrong banknote!"},B={data:function(){return{isInserted:!1,balanceField:0,selectCurrency:"$",insertingState:{message:F.default,isWarning:!1},isWrongBanknote:!1}},created:function(){var e=this;this.debouncedAmount=W.a.debounce((function(){var t=e.currency.find((function(e){return e.isSelected})),n=Object.values(t.banknotes).some((function(t){return t===parseInt(e.balanceField)}));n?(e.insertingState=F.default,e.isInserted=!0):e.insertingState=0!==e.balanceField?{message:F.wrongBanknote,isWarning:!0}:{message:F.default,isWarning:!1}}),500)},watch:{selectCurrency:function(e){this._selectCurrency({currencyName:e})},balanceField:function(){this.isInserted=!1,this.insertingState={message:F.process,isWarning:!1},this.debouncedAmount()}},computed:Object(y["a"])(Object(y["a"])({},Object(g["c"])(["products","isSelectedProduct","balance","state","currency"])),{},{currencyNames:function(){return this.currency.map((function(e){return e.name}))},selectedCurrency:function(){return this.currency.find((function(e){return e.isSelected}))}}),methods:Object(y["a"])(Object(y["a"])({},Object(g["b"])({_insertMoney:"insertMoney",_selectCurrency:"selectCurrency",buyItem:"buyItem"})),{},{numbersValidate:function(e){var t=e.keyCode?e.keyCode:e.which;(t<48||t>57)&&46!==t&&e.preventDefault()},insertMoney:function(){this._insertMoney({amount:parseInt(this.balanceField)}),this.balanceField=0,this.isInserted=!1}})},$=B,T=(n("e5b2"),n("8336")),D=n("b974"),E=n("e0c7"),N=n("8654"),R=Object(u["a"])($,V,M,!1,null,null,null),J=R.exports;d()(R,{VBtn:T["a"],VCard:S["a"],VCardActions:k["a"],VCardTitle:k["c"],VSelect:D["a"],VSubheader:E["a"],VTextField:N["a"]});var q={name:"VendingMachine",mounted:function(){this.initData()},computed:Object(y["a"])({},Object(g["c"])(["products","receivedProducts"])),methods:Object(y["a"])({},Object(g["b"])(["initData"])),components:{Product:x,Cash:J}},H=q,z=(n("2e3c"),Object(u["a"])(H,h,_,!1,null,null,null)),G=z.exports,K={name:"Main",components:{VendingMachine:G}},L=K,Q=Object(u["a"])(L,b,v,!1,null,null,null),U=Q.exports;c["a"].use(m["a"]);var X=[{path:"/",name:"Home",component:U}],Y=new m["a"]({mode:"history",base:"/otakoyi-test/",routes:X}),Z=Y,ee=(n("4de4"),n("d4ec")),te=n("bee2"),ne=n("bc3a"),ce=n.n(ne),ae=function(){function e(){Object(ee["a"])(this,e),this.httpClient={headers:{Accept:"application/ld+json","Content-Type":"application/ld+json"}}}return Object(te["a"])(e,[{key:"getProducts",value:function(){var e=this;return ce.a.get("../data/products.json",{headers:this.httpClient.headers}).then((function(t){return e.transformProductData(t.data)})).catch((function(e){return console.log(e)}))}},{key:"getCurrency",value:function(){var e=this;return ce.a.get("../data/currency.json",{headers:this.httpClient.headers}).then((function(t){return e.transformCurrencyData(t.data)})).catch((function(e){return console.log(e)}))}},{key:"transformProductData",value:function(e){return e.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{image:"https://source.unsplash.com/300x300/?".concat(e.name),currency:"$",isSelected:!1})}))}},{key:"transformCurrencyData",value:function(e){return e.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{isSelected:"$"===e.name})}))}}]),e}(),re=new ae;c["a"].use(g["a"]);var se={default:"Please select a product",selected:"Please insert the appropriate amount of money",lowAmount:"Inserted the low amount of money",muchAmount:"Inserted much amount of money. Please wait while we return remainder"},ie=.5,ue=function(e,t){return"$"===e?t/ie:t*ie},oe=new g["a"].Store({state:{products:[],receivedProducts:[],currency:[],state:{message:se.default,isWarning:!1},isSelectedProduct:!1,balance:0},mutations:{updateProducts:function(e,t){e.products=t},updateCurrency:function(e,t){e.currency=t},updateIsSelectedProduct:function(e,t){e.isSelectedProduct=t},updateReceivedProducts:function(e,t){e.receivedProducts.push(t)},updateState:function(e,t){var n=t.isWarning,c=t.message;e.state={isWarning:n||!1,message:c}},updateBalance:function(e,t){e.balance=t}},actions:{initData:function(e){var t=e.dispatch;t("getProducts"),t("getCurrency")},getProducts:function(e){var t=e.commit;re.getProducts().then((function(e){return t("updateProducts",e)}))},selectProduct:function(e,t){var n=e.state,c=e.commit,a=t.productId;c("updateState",{message:se.default}),c("updateIsSelectedProduct",!1);var r=n.products.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{isSelected:a===e.id&&!e.isSelected})}));r.some((function(e){return e.isSelected}))&&c("updateIsSelectedProduct",!n.isSelectedProduct),c("updateProducts",r),n.isSelectedProduct&&c("updateState",{message:se.selected})},getCurrency:function(e){var t=e.commit;re.getCurrency().then((function(e){return t("updateCurrency",e)}))},selectCurrency:function(e,t){var n=e.state,c=e.commit,a=t.currencyName,r=n.currency.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{isSelected:a===e.name&&!e.isSelected})})),s=n.products.map((function(e){return Object(y["a"])(Object(y["a"])({},e),{},{price:ue(a,e.price),currency:a})}));c("updateCurrency",r),c("updateProducts",s),c("updateBalance",ue(a,n.balance))},insertMoney:function(e,t){var n=e.state,c=e.commit,a=t.amount;c("updateBalance",n.balance+a)},buyItem:function(e){var t=e.state,n=e.commit,c=e.dispatch,a=t.products.find((function(e){return e.isSelected}));if(t.balance<a.price)n("updateState",{message:se.lowAmount,isWarning:!0});else{var r=t.products.filter((function(e){return e.id!==a.id}));n("updateProducts",r),n("updateBalance",t.balance-a.price),n("updateState",{message:se.default}),c("setReceivedProducts",a)}},setReceivedProducts:function(e,t){var n=e.commit;n("updateReceivedProducts",t)}}}),de=n("f309");c["a"].use(de["a"]);var le=new de["a"]({theme:{dark:!0,themes:{dark:{primary:"#4CAF50"}}}});c["a"].config.productionTip=!1,new c["a"]({router:Z,store:oe,vuetify:le,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var c=n("9c0c"),a=n.n(c);a.a},"7cd1":function(e,t,n){"use strict";var c=n("3ea6"),a=n.n(c);a.a},8298:function(e,t,n){},"9c0c":function(e,t,n){},e5b2:function(e,t,n){"use strict";var c=n("069b"),a=n.n(c);a.a}});
//# sourceMappingURL=app.2465f4dd.js.map